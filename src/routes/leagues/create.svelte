<script>
	import { Button, TextInput, Content, Grid, Row, Column } from 'carbon-components-svelte';
	import { goto } from '$app/navigation';
	import { leagues } from '$lib/stores/leagues';

	let name = null;

	function createLeague() {
		const newLeagueName = name;
		leagues.update((ls) => {
			ls.push({
				name: newLeagueName,
				players: [
					{
						name: 'Bertil'
					},
					{
						name: 'T채rje'
					},
					{
						name: 'AD'
					},
					{
						name: 'Coco'
					},
					{
						name: 'Claes'
					},
					{
						name: 'Anders'
					}
				],
				matches: [
					{
						id: 1,
						teams: [
							['Bertil', 'T채rje'],
							['AD', 'Coco']
						],
						result: [6, 2]
					},
					{
						id: 2,
						teams: [
							['Bertil', 'AD'],
							['T채rje', 'Anders']
						],
						result: [4, 4]
					},
					{
						id: 3,
						teams: [
							['Bertil', 'Coco'],
							['T채rje', 'Claes']
						],
						result: [3, 5]
					}
				]
			});
			return ls;
		});
		goto('/leagues/' + newLeagueName);
	}
</script>

<Content>
	<Grid>
		<Row>
			<Column>
				<h1>Create League</h1>
				<TextInput bind:value={name} labelText="Name" />
				<br />
				<Button on:click={createLeague}>Create</Button>
			</Column>
		</Row>
	</Grid>
</Content>
